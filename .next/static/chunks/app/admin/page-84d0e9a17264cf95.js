(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{302:function(e,t,s){Promise.resolve().then(s.bind(s,2155))},9205:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(2265);let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&s.indexOf(e)===t).join(" ")};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,iconNode:p,...h}=e;return(0,a.createElement)("svg",{ref:t,...r,width:l,height:l,stroke:s,strokeWidth:c?24*Number(n)/Number(l):n,className:i("lucide",o),...h},[...p.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(d)?d:[d]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:c,...o}=s;return(0,a.createElement)(n,{ref:r,iconNode:t,className:i("lucide-".concat(l(e)),c),...o})});return s.displayName="".concat(e),s}},9397:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8930:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},2155:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return d}});var a=s(7437),l=s(2265),i=s(9397),r=s(9205);let n=(0,r.Z)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),c=(0,r.Z)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var o=s(8930);function d(){let[e,t]=(0,l.useState)([]),[s,r]=(0,l.useState)(!0),[d,p]=(0,l.useState)(null),[h,u]=(0,l.useState)(!1),[x,m]=(0,l.useState)({name:"",description:"",longDescription:"",price:0,category:"Solar Panels",images:[""],specifications:{},featured:!1});(0,l.useEffect)(()=>{fetch("/api/products").then(e=>e.json()).then(e=>t(Array.isArray(e)?e:[])).finally(()=>r(!1))},[]);let g=async()=>{if(!x.name)return;let e={...x,slug:(x.name||"").toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9-]/g,""),specifications:"object"==typeof x.specifications?x.specifications:{},images:Array.isArray(x.images)?x.images.filter(Boolean):[]};if(d)await fetch("/api/products/".concat(d.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t(t=>t.map(t=>t.id===d.id?{...t,...e}:t)),p(null);else{let s=await fetch("/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await s.json();t(e=>[...e,a]),u(!1)}b()},f=async e=>{confirm("Delete this product?")&&(await fetch("/api/products/".concat(e),{method:"DELETE"}),t(t=>t.filter(t=>t.id!==e)),p(null))},b=()=>{m({name:"",description:"",longDescription:"",price:0,category:"Solar Panels",images:[""],specifications:{},featured:!1})},j=(e,t)=>{m(s=>{let a={...s.specifications||{}};return t?a[e]=t:delete a[e],{...s,specifications:a}})},y=e=>{var t;p(e),m({name:e.name,description:e.description,longDescription:e.longDescription,price:e.price,category:e.category,images:(null===(t=e.images)||void 0===t?void 0:t.length)?e.images:[""],specifications:e.specifications||{},featured:e.featured}),u(!0)};return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsx)("h1",{className:"font-display text-4xl font-bold mb-2",children:"Admin"}),(0,a.jsx)("p",{className:"text-slate-400 mb-8",children:"Manage products, specifications, and images."}),s?(0,a.jsx)("div",{className:"text-slate-400",children:"Loading..."}):(0,a.jsxs)(a.Fragment,{children:[h?(0,a.jsxs)("div",{className:"glass rounded-2xl p-8 mb-8",children:[(0,a.jsx)("h2",{className:"font-display text-xl font-semibold mb-6",children:d?"Edit Product":"New Product"}),(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Name"}),(0,a.jsx)("input",{type:"text",value:x.name||"",onChange:e=>m(t=>({...t,name:e.target.value})),className:"w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Category"}),(0,a.jsxs)("select",{value:x.category||"",onChange:e=>m(t=>({...t,category:e.target.value})),className:"w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white",children:[(0,a.jsx)("option",{children:"Solar Panels"}),(0,a.jsx)("option",{children:"Inverters"}),(0,a.jsx)("option",{children:"Batteries"}),(0,a.jsx)("option",{children:"Mounting & Racking"}),(0,a.jsx)("option",{children:"Other"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Price (cents, e.g. 34900 = $349)"}),(0,a.jsx)("input",{type:"number",value:x.price||0,onChange:e=>m(t=>({...t,price:Number(e.target.value)})),className:"w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Short Description"}),(0,a.jsx)("input",{type:"text",value:x.description||"",onChange:e=>m(t=>({...t,description:e.target.value})),className:"w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Long Description"}),(0,a.jsx)("textarea",{value:x.longDescription||"",onChange:e=>m(t=>({...t,longDescription:e.target.value})),rows:3,className:"w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Images (URLs, one per line)"}),(0,a.jsx)("textarea",{value:(x.images||[""]).join("\n"),onChange:e=>m(t=>({...t,images:e.target.value.split("\n").filter(Boolean)})),rows:2,className:"w-full px-4 py-2 rounded-lg bg-white/10 border border-white/20 text-white",placeholder:"https://example.com/image1.jpg"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-slate-400 mb-1",children:"Featured"}),(0,a.jsx)("input",{type:"checkbox",checked:!!x.featured,onChange:e=>m(t=>({...t,featured:e.target.checked})),className:"mr-2"}),(0,a.jsx)("span",{className:"text-slate-300",children:"Show on homepage"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,a.jsx)("label",{className:"text-sm text-slate-400",children:"Specifications"}),(0,a.jsx)("button",{onClick:()=>{let e=prompt("Spec name (e.g. Power Output):");e&&m(t=>({...t,specifications:{...t.specifications||{},[e]:""}}))},className:"text-solar-sky text-sm hover:underline",children:"+ Add spec"})]}),(0,a.jsx)("div",{className:"space-y-2",children:Object.entries(x.specifications||{}).map(e=>{let[t,s]=e;return(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:t,readOnly:!0,className:"w-1/3 px-3 py-2 rounded-lg bg-white/5 text-slate-400"}),(0,a.jsx)("input",{type:"text",value:s,onChange:e=>j(t,e.target.value),className:"flex-1 px-3 py-2 rounded-lg bg-white/10 border border-white/20 text-white",placeholder:"Value"})]},t)})})]}),(0,a.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,a.jsxs)("button",{onClick:g,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-solar-leaf hover:bg-solar-forest",children:[(0,a.jsx)(n,{className:"w-4 h-4"})," Save"]}),(0,a.jsx)("button",{onClick:()=>{u(!1),p(null)},className:"px-6 py-2 rounded-lg glass",children:"Cancel"})]})]})]}):(0,a.jsxs)("button",{onClick:()=>{p(null),b(),u(!0)},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-solar-leaf hover:bg-solar-forest transition-colors mb-8",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"})," Add Product"]}),(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsxs)("div",{className:"glass rounded-xl p-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold",children:e.name}),(0,a.jsxs)("p",{className:"text-slate-400 text-sm",children:[e.category," â€¢ ",new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD"}).format(e.price/100)]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>y(e),className:"p-2 rounded-lg hover:bg-white/10",children:(0,a.jsx)(c,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>f(e.id),className:"p-2 rounded-lg hover:bg-red-500/20 text-red-400",children:(0,a.jsx)(o.Z,{className:"w-5 h-5"})})]})]},e.id))})]})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=302)}),_N_E=e.O()}]);